!function(){"use strict";new class{constructor(){this.load().then(this.showResults.bind(this))}load(){return fetch("/wp-admin/admin-ajax.php?action=get_shlinks")}async showResults(t){let e=await t.json();console.log(e);let n="Oops, something unexpected happened";n=e.ok?this.getListHTML(e.shlink.shortUrls.data):"Error: "+(e.error||"mystery error"),document.querySelector(".shlink-manager").innerHTML=n,document.querySelector(".shlink-create").addEventListener("submit",this.createShlink.bind(this))}getListHTML(t){let e='<ul class="shlink-list">';for(let n of t)e+=this.getItemHTML(n);return e+="</ul>",e}getItemHTML(t){let e=t.title||t.longUrl;return`<li class="shlink-item">\n\t\t\t<a href="${t.longUrl}" class="shlink-long-url">${e}</a>\n\t\t\t<a href="${t.shortUrl}" class="shlink-short-url">${t.shortUrl}</a>\n\t\t</li>`}async createShlink(t){t.preventDefault();let e=t.target.getAttribute("action"),n=document.querySelector("input.shlink-long-url"),l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:this.encodeFormData({action:"create_shlink",long_url:n.value})}),s=await l.json();n.value="",console.log(s)}encodeFormData(t){return Object.keys(t).map((e=>`${e=encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&")}}}();